# 浏览器

# 浏览器的进程和线程

## 1.浏览器是多进程的
浏览器是多进程的，打开浏览器的一个页面就可以看到浏览器打开的多个进程，包括 network 、GPU、标签、浏览器主进程

下面介绍一下进程和线程的关系
### 线程和进程的关系
线程：线程是用来处理任务的
进程：进程用来启动和管理线程，一个进程就是一个程序的运行实例

### 进程和线程的4个特点
1. 进程中的任一线程崩溃就会导致进程的崩溃
2. 线程之间共享进程的数据
3. 当一个进程关闭之后，操作系统会回收进程所占用的内存
4. 进程之间的内容相互隔离

### 目前浏览器的各个进程
1. 浏览器进程
2. 渲染进程
3. GPU 进程
4. 网络进程
5. 插件进程

浏览器的多进程确实提升了浏览器的稳定性、流畅性和安全性，但也不可避免的带来了一些问题
1. 更高的资源占用
2. 更复杂的体系架构

## 2.从输入URL到页面展示
1. 页面资源请求过程，浏览器进程会通过进程间通信把URL请求发送到网络进程，网络进程会去查询本地是否有缓存了该资源。

2. DNS解析 获取IP和端口

3. 进行TCP链接

4. 发送HTTP请求

5. 服务端返回数据

5. 网络进程根据服务端返回的数据进行处理
#### 重定向
如果网络进程解析到的响应头状态码是 301 或 302 那么就会根据响应头的 Location 字段进行重定向
#### 响应数据类型进行处理
浏览器根据 Content-Type 的值来决定显示的内容

6. 准备渲染进程进行渲染

7. 浏览器进程会通知渲染进程进行文档提交，渲染进程就会和网络进程建立管道，数据传输完成后将会通知浏览器进程传输完成

8. 渲染进程准备渲染

## process-per-site-instance
如果从一个页面打开了另一个新 页面，而新页面和当前页面属于同一站点的话，那么新页面会复用父页面的渲染进程


## 页面渲染
### 构建dom树
因为浏览器












